<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·∫£ Xe</title>
    <link rel="stylesheet" href="css/traxe.css">
</head>
<body>
    <div class="container">
        <!-- Left Section -->
        <div class="left-section">
            <div class="header">
                <div class="header-icon">üÖøÔ∏è</div>
                <div class="header-info">
                    <h1>Tr·∫£ Xe T·∫°i Tr·∫°m</h1>
                    <div class="station-name">Tr·∫°m Nguy·ªÖn Hu·ªá</div>
                </div>
            </div>

            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step-item active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-text">ƒê∆∞a xe v√†o √¥</div>
                </div>
                <div class="step-item" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-text">Qu√©t th·∫ª</div>
                </div>
                <div class="step-item" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-text">Thanh to√°n</div>
                </div>
            </div>

            <!-- Alerts -->
            <div class="alert alert-error" id="alertError">
                <strong>‚ö†Ô∏è L·ªói:</strong> <span id="errorMessage"></span>
            </div>

            <div class="alert alert-warning" id="alertWarning">
                <strong>‚ö†Ô∏è C·∫£nh b√°o:</strong> <span id="warningMessage"></span>
            </div>

            <div class="alert alert-info" id="alertInfo">
                <strong>‚ÑπÔ∏è Th√¥ng b√°o:</strong> <span id="infoMessage"></span>
            </div>

            <div class="alert alert-success" id="alertSuccess">
                <strong>‚úì Th√†nh c√¥ng:</strong> <span id="successMessage"></span>
            </div>

            <!-- Step 1: Park Bike -->
            <div class="step-content" id="step1Content">
                <div class="section-title">üö≤ ƒê∆∞a xe v√†o √¥ tr·ªëng</div>
                
                <div class="parking-slots">
                    <div class="slot-item" data-slot="1">
                        <div class="slot-icon">üö≤</div>
                        <div class="slot-number">√î 01</div>
                        <div class="slot-status occupied">C√≥ xe</div>
                    </div>
                    <div class="slot-item" data-slot="2">
                        <div class="slot-icon">üì¶</div>
                        <div class="slot-number">√î 02</div>
                        <div class="slot-status empty">Tr·ªëng</div>
                    </div>
                    <div class="slot-item" data-slot="3">
                        <div class="slot-icon">üö≤</div>
                        <div class="slot-number">√î 03</div>
                        <div class="slot-status occupied">C√≥ xe</div>
                    </div>
                    <div class="slot-item" data-slot="4">
                        <div class="slot-icon">üì¶</div>
                        <div class="slot-number">√î 04</div>
                        <div class="slot-status empty">Tr·ªëng</div>
                    </div>
                </div>

                <div class="sensor-check">
                    <div class="sensor-icon" id="sensorIcon">üì°</div>
                    <div class="sensor-status" id="sensorStatus">ƒêang ch·ªù xe...</div>
                    <div class="sensor-detail" id="sensorDetail">Vui l√≤ng ƒë∆∞a xe v√†o √¥ tr·ªëng v√† ƒë·∫£m b·∫£o xe kh·ªõp v·ªõi kh·ªõp n·ªëi</div>
                </div>

                <!-- Demo: Simulate parking -->
                <div class="demo-controls">
                    <div class="demo-title">Demo: M√¥ ph·ªèng ƒë·ªó xe</div>
                    <div class="demo-buttons">
                        <button type="button" class="demo-btn" data-action="correct">ƒê·ªó xe ƒë√∫ng v·ªã tr√≠</button>
                        <button type="button" class="demo-btn" data-action="wrong">ƒê·ªó xe sai v·ªã tr√≠</button>
                        <button type="button" class="demo-btn" data-action="reset">Reset</button>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">H·ªßy b·ªè</button>
                    <button type="button" class="btn btn-primary" id="nextStep1Btn" disabled>Ti·∫øp t·ª•c qu√©t th·∫ª</button>
                </div>
            </div>

            <!-- Step 2: Scan Card -->
            <div class="step-content hidden" id="step2Content">
                <div class="section-title">üí≥ Qu√©t th·∫ª ƒë·ªÉ ho√†n t·∫•t tr·∫£ xe</div>
                
                <div class="parked-bike-info">
                    <div class="info-icon">‚úì</div>
                    <div class="info-text">
                        <div class="info-label">Xe ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t ƒë√∫ng v·ªã tr√≠</div>
                        <div class="info-value">√î 02 - ƒê√£ kh√≥a an to√†n</div>
                    </div>
                </div>

                <div class="card-scanner">
                    <div class="scanner-animation" id="scannerAnimation">
                        <div class="scanner-icon">üí≥</div>
                        <div class="scanner-waves">
                            <div class="wave"></div>
                            <div class="wave"></div>
                            <div class="wave"></div>
                        </div>
                        <div class="scanner-text">Vui l√≤ng qu√©t th·∫ª c·ªßa b·∫°n</div>
                    </div>

                    <div class="card-info hidden" id="cardInfo">
                        <div class="card-row">
                            <span class="label">S·ªë th·∫ª:</span>
                            <span id="scannedCardNumber">--</span>
                        </div>
                        <div class="card-row">
                            <span class="label">Lo·∫°i th·∫ª:</span>
                            <span id="scannedCardType">--</span>
                        </div>
                        <div class="card-row">
                            <span class="label">S·ªë d∆∞:</span>
                            <span id="scannedCardBalance">--</span>
                        </div>
                    </div>
                </div>

                <!-- Demo: Simulate card scan -->
                <div class="demo-controls">
                    <div class="demo-title">Demo: M√¥ ph·ªèng qu√©t th·∫ª</div>
                    <div class="demo-buttons">
                        <button type="button" class="demo-btn" data-card="valid">Th·∫ª h·ª£p l·ªá (ƒë·ªß ti·ªÅn)</button>
                        <button type="button" class="demo-btn" data-card="insufficient">Th·∫ª thi·∫øu ti·ªÅn</button>
                        <button type="button" class="demo-btn" data-card="error">L·ªói qu√©t th·∫ª</button>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" id="backStep2Btn">Quay l·∫°i</button>
                    <button type="button" class="btn btn-primary" id="calculateBtn" disabled>T√≠nh ti·ªÅn</button>
                </div>
            </div>

            <!-- Step 3: Payment -->
            <div class="step-content hidden" id="step3Content">
                <div class="payment-container">
                    <div class="payment-header">
                        <div class="payment-icon">üßæ</div>
                        <div class="payment-title">Chi ti·∫øt thanh to√°n</div>
                    </div>

                    <!-- Rental Details -->
                    <div class="rental-details">
                        <div class="detail-section">
                            <div class="section-label">Th√¥ng tin thu√™ xe</div>
                            <div class="detail-row">
                                <span>S·ªë xe:</span>
                                <span id="paymentBikeNumber">B001</span>
                            </div>
                            <div class="detail-row">
                                <span>Th·ªùi gian b·∫Øt ƒë·∫ßu:</span>
                                <span id="paymentStartTime">--</span>
                            </div>
                            <div class="detail-row">
                                <span>Th·ªùi gian k·∫øt th√∫c:</span>
                                <span id="paymentEndTime">--</span>
                            </div>
                            <div class="detail-row highlight">
                                <span>T·ªïng th·ªùi gian:</span>
                                <span id="paymentDuration">--</span>
                            </div>
                        </div>

                        <!-- Cost Calculation -->
                        <div class="detail-section">
                            <div class="section-label">T√≠nh ph√≠</div>
                            <div class="detail-row">
                                <span>ƒê∆°n gi√°:</span>
                                <span>5.000ƒë/gi·ªù</span>
                            </div>
                            <div class="detail-row">
                                <span>Ph√≠ thu√™:</span>
                                <span id="paymentBaseFee">--</span>
                            </div>
                            <div class="detail-row minimum-fee" id="minimumFeeRow" style="display: none;">
                                <span>‚ö†Ô∏è Ph√≠ t·ªëi thi·ªÉu:</span>
                                <span>2.000ƒë</span>
                            </div>
                        </div>

                        <!-- Discount Section -->
                        <div class="detail-section promo-section" id="promoSection" style="display: none;">
                            <div class="section-label">üéÅ Khuy·∫øn m√£i</div>
                            <div class="promo-input-group">
                                <input type="text" class="promo-input" id="promoInput" placeholder="Nh·∫≠p m√£ khuy·∫øn m√£i">
                                <button type="button" class="btn-apply-promo" id="applyPromoBtn">√Åp d·ª•ng</button>
                            </div>
                            <div class="promo-message" id="promoMessage"></div>
                            <div class="detail-row discount-row" id="discountRow" style="display: none;">
                                <span>Gi·∫£m gi√°:</span>
                                <span id="paymentDiscount">-0ƒë</span>
                            </div>
                        </div>

                        <!-- Total -->
                        <div class="total-section">
                            <div class="total-row original-price" id="originalPriceRow" style="display: none;">
                                <span>Gi√° g·ªëc:</span>
                                <span id="paymentOriginalPrice">--</span>
                            </div>
                            <div class="total-row">
                                <span>T·ªïng thanh to√°n:</span>
                                <span id="paymentTotal">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" id="backStep3Btn">Quay l·∫°i</button>
                        <button type="button" class="btn btn-primary" id="confirmPaymentBtn">X√°c nh·∫≠n thanh to√°n</button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Complete -->
            <div class="step-content hidden" id="step4Content">
                <div class="complete-container">
                    <div class="success-animation">
                        <div class="success-icon-big">‚úÖ</div>
                        <div class="success-title">Tr·∫£ xe th√†nh c√¥ng!</div>
                        <div class="success-subtitle">C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng d·ªãch v·ª•</div>
                    </div>

                    <div class="receipt">
                        <div class="receipt-header">
                            <div class="receipt-title">BI√äN LAI TR·∫¢ XE</div>
                            <div class="receipt-time" id="receiptTime">--</div>
                        </div>

                        <div class="receipt-body">
                            <div class="receipt-row">
                                <span>S·ªë xe:</span>
                                <span id="receiptBikeNumber">--</span>
                            </div>
                            <div class="receipt-row">
                                <span>S·ªë th·∫ª:</span>
                                <span id="receiptCardNumber">--</span>
                            </div>
                            <div class="receipt-row">
                                <span>Th·ªùi gian thu√™:</span>
                                <span id="receiptDuration">--</span>
                            </div>
                            <div class="receipt-row">
                                <span>Ph√≠ thu√™:</span>
                                <span id="receiptFee">--</span>
                            </div>
                            <div class="receipt-row discount" id="receiptDiscountRow" style="display: none;">
                                <span>Gi·∫£m gi√°:</span>
                                <span id="receiptDiscount">--</span>
                            </div>
                            <div class="receipt-total">
                                <span>T·ªïng thanh to√°n:</span>
                                <span id="receiptTotal">--</span>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-primary btn-full" id="finishBtn">Ho√†n t·∫•t</button>
                </div>
            </div>

            <!-- Loading Overlay -->
            <div class="loading-overlay hidden" id="loadingOverlay">
                <div class="spinner"></div>
                <p>ƒêang x·ª≠ l√Ω...</p>
            </div>
        </div>

        <!-- Right Section -->
        <div class="right-section">
            <div class="summary-card">
                <div class="summary-title">Th√¥ng tin tr·∫°m</div>
                <div class="station-stats">
                    <div class="stat-item">
                        <div class="stat-number">12</div>
                        <div class="stat-label">√î tr·ªëng</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">16</div>
                        <div class="stat-label">T·ªïng s·ªë √¥</div>
                    </div>
                </div>
            </div>

            <div class="summary-card" id="feePreviewCard" style="display: none;">
                <div class="summary-title">D·ª± ki·∫øn ph√≠</div>
                <div class="fee-preview">
                    <div class="fee-row">
                        <span>Th·ªùi gian thu√™:</span>
                        <span id="previewDuration">--</span>
                    </div>
                    <div class="fee-row">
                        <span>D·ª± ki·∫øn ph√≠:</span>
                        <span id="previewFee" class="fee-amount">--</span>
                    </div>
                </div>
            </div>

            <div class="info-box">
                <div class="info-box-title">üìã H∆∞·ªõng d·∫´n tr·∫£ xe</div>
                <div class="info-box-text">
                    <strong>B∆∞·ªõc 1:</strong> ƒê∆∞a xe v√†o √¥ tr·ªëng v√† ƒë·∫£m b·∫£o xe kh·ªõp v·ªõi kh·ªõp n·ªëi<br>
                    <strong>B∆∞·ªõc 2:</strong> Qu√©t th·∫ª ƒë√£ d√πng khi thu√™ xe<br>
                    <strong>B∆∞·ªõc 3:</strong> Ki·ªÉm tra chi ph√≠ v√† x√°c nh·∫≠n thanh to√°n<br>
                    <strong>L∆∞u √Ω:</strong> Ph√≠ t·ªëi thi·ªÉu 2.000ƒë cho m·ªói l·∫ßn thu√™
                </div>
            </div>

            <div class="info-box">
                <div class="info-box-title">üí∞ B·∫£ng gi√°</div>
                <div class="info-box-text">
                    ‚Ä¢ Gi√° thu√™: <strong>5.000ƒë/gi·ªù</strong><br>
                    ‚Ä¢ Ph√≠ t·ªëi thi·ªÉu: <strong>2.000ƒë</strong><br>
                    ‚Ä¢ ƒê·∫∑t c·ªçc: <strong>50.000ƒë</strong> (ho√†n tr·∫£)<br>
                    ‚Ä¢ Ph√≠ qu√° gi·ªù: <strong>10.000ƒë/gi·ªù</strong>
                </div>
            </div>

            <div class="info-box promo-info">
                <div class="info-box-title">üéÅ Khuy·∫øn m√£i</div>
                <div class="info-box-text">
                    ‚Ä¢ <strong>SAVE10:</strong> Gi·∫£m 10%<br>
                    ‚Ä¢ <strong>FIRST20:</strong> Gi·∫£m 20% l·∫ßn ƒë·∫ßu<br>
                    ‚Ä¢ <strong>FREE2K:</strong> Mi·ªÖn ph√≠ 2.000ƒë
                </div>
            </div>

            <div class="info-box warning-box">
                <div class="info-box-title">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</div>
                <div class="info-box-text">
                    ‚Ä¢ ƒê·∫£m b·∫£o xe kh·ªõp ƒë√∫ng v·ªã tr√≠ tr∆∞·ªõc khi qu√©t th·∫ª<br>
                    ‚Ä¢ Ki·ªÉm tra s·ªë d∆∞ th·∫ª tr∆∞·ªõc khi tr·∫£ xe<br>
                    ‚Ä¢ N·∫°p ti·ªÅn n·∫øu kh√¥ng ƒë·ªß thanh to√°n<br>
                    ‚Ä¢ Hotline: <strong>1900 1234</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio for alerts -->
    <audio id="errorSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTcIF2m98OScTgwOUKzn8LhlHQU2jdTxz3ozBSh+zPLaizsKFF+45OumVBMJR6Hh8bxsIAQohM/y24k4CBdqvfDknE4MDlCs5/C4ZR0FNo3U8c96MwUofszy2os7ChRfuOTrplQTCUeh4fG8bCAEKITP8tyIOQcXar3w5JxODA5QrOfwuGUdBTaN1PHPejMFKH7M8tqLOwoUX7jk66ZUEwlHoeHxvGwgBCiEz/LciDkHF2q98OScTgwOUKzn8LhlHQU2jdTxz3ozBSh+zPLaizsKFF+45OumVBMJR6Hh8bxsIAQohM/y3Ig5BxdqvfDknE4MDlCs5/C4ZR0FNo3U8c96MwUofszy2os7ChRfuOTrplQTCUeh4fG8bCAEKITP8tyIOQcXar3w5JxODA5QrOfwuGUdBTaN1PHPejMFKH7M8tqLOwoUX7jk66ZUEwlHoeHxvGwgBCiEz/LciDkHF2q98OScTgwOUKzn8LhlHQU2jdTxz3ozBSh+zPLaizsKFF+45OumVBMJR6Hh8bxsIAQohM/y3Ig5BxdqvfDknE4MDlCs5/C4ZR0FNo3U8c96MwUofszy2os7ChRfuOTrplQTCUeh4fG8bCAEKITP8tyIOQcXar3w5JxODA5QrOfwuGUdBTaN1PHPejMFKH7M8tqLOwoUX7jk66ZUEwlHoeHxvGwgBCiEz/LciDkHF2q98OScTgwOUKzn8Lg=" type="audio/wav">
    </audio>

    <script src="js/traxe.js"></script>
</body>
</html>
