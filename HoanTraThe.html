<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ho√†n Tr·∫£ Th·∫ª</title>
    <link rel="stylesheet" href="css/hoantrathe.css">
</head>
<body>
    <div class="container">
        <!-- Left Section -->
        <div class="left-section">
            <div class="header">
                <div class="header-icon">üí≥</div>
                <div class="header-info">
                    <h1>Ho√†n Tr·∫£ Th·∫ª</h1>
                    <div class="station-name">Tr·∫°m Nguy·ªÖn Hu·ªá</div>
                </div>
            </div>

            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step-item active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-text">Qu√©t th·∫ª</div>
                </div>
                <div class="step-item" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-text">X√°c nh·∫≠n</div>
                </div>
                <div class="step-item" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-text">Ho√†n t·∫•t</div>
                </div>
            </div>

            <!-- Alerts -->
            <div class="alert alert-error" id="alertError">
                <strong>‚ö†Ô∏è L·ªói:</strong> <span id="errorMessage"></span>
            </div>

            <div class="alert alert-warning" id="alertWarning">
                <strong>‚ö†Ô∏è C·∫£nh b√°o:</strong> <span id="warningMessage"></span>
            </div>

            <div class="alert alert-info" id="alertInfo">
                <strong>‚ÑπÔ∏è Th√¥ng b√°o:</strong> <span id="infoMessage"></span>
            </div>

            <div class="alert alert-success" id="alertSuccess">
                <strong>‚úì Th√†nh c√¥ng:</strong> <span id="successMessage"></span>
            </div>

            <!-- Step 1: Scan Card -->
            <div class="step-content" id="step1Content">
                <div class="section-title">üí≥ Qu√©t th·∫ª ƒë·ªÉ ho√†n tr·∫£</div>
                
                <div class="card-scanner">
                    <div class="scanner-animation" id="scannerAnimation">
                        <div class="scanner-icon">üí≥</div>
                        <div class="scanner-waves">
                            <div class="wave"></div>
                            <div class="wave"></div>
                            <div class="wave"></div>
                        </div>
                        <div class="scanner-text">Vui l√≤ng ƒë∆∞a th·∫ª v√†o khe ƒë·ªçc th·∫ª</div>
                    </div>

                    <div class="card-info hidden" id="cardInfo">
                        <div class="card-visual">
                            <div class="card-chip">üí≥</div>
                            <div class="card-details">
                                <div class="card-number" id="displayCardNumber">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
                                <div class="card-holder">Th·∫ª thu√™ xe</div>
                            </div>
                        </div>

                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">S·ªë th·∫ª</div>
                                <div class="info-value" id="cardNumber">--</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Lo·∫°i th·∫ª</div>
                                <div class="info-value" id="cardType">--</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">S·ªë d∆∞ hi·ªán t·∫°i</div>
                                <div class="info-value highlight" id="cardBalance">--</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Tr·∫°ng th√°i</div>
                                <div class="info-value" id="cardStatus">--</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rental Status Check -->
                <div class="rental-status hidden" id="rentalStatus">
                    <div class="status-header">
                        <div class="status-icon" id="rentalIcon">üö≤</div>
                        <div class="status-text">
                            <div class="status-title" id="rentalTitle">Tr·∫°ng th√°i thu√™ xe</div>
                            <div class="status-subtitle" id="rentalSubtitle">ƒêang ki·ªÉm tra...</div>
                        </div>
                    </div>
                </div>

                <!-- Demo: Simulate card scan -->
                <div class="demo-controls">
                    <div class="demo-title">Demo: M√¥ ph·ªèng qu√©t th·∫ª</div>
                    <div class="demo-buttons">
                        <button type="button" class="demo-btn" data-card="prepaid-ok">Th·∫ª tr·∫£ tr∆∞·ªõc (OK)</button>
                        <button type="button" class="demo-btn" data-card="postpaid-ok">Th·∫ª tr·∫£ sau (OK)</button>
                        <button type="button" class="demo-btn" data-card="has-rental">ƒêang m∆∞·ª£n xe</button>
                        <button type="button" class="demo-btn" data-card="negative">S·ªë d∆∞ √¢m</button>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" id="cancelStep1Btn">H·ªßy b·ªè</button>
                    <button type="button" class="btn btn-primary" id="nextStep1Btn" disabled>Ti·∫øp t·ª•c</button>
                </div>
            </div>

            <!-- Step 2: Confirm Return -->
            <div class="step-content hidden" id="step2Content">
                <div class="section-title">üìã X√°c nh·∫≠n ho√†n tr·∫£ th·∫ª</div>

                <div class="confirmation-container">
                    <!-- Card Summary -->
                    <div class="summary-box">
                        <div class="summary-header">
                            <div class="summary-icon">üí≥</div>
                            <div class="summary-title">Th√¥ng tin th·∫ª</div>
                        </div>
                        <div class="summary-content">
                            <div class="summary-row">
                                <span>S·ªë th·∫ª:</span>
                                <span id="confirmCardNumber">--</span>
                            </div>
                            <div class="summary-row">
                                <span>Lo·∫°i th·∫ª:</span>
                                <span id="confirmCardType">--</span>
                            </div>
                            <div class="summary-row">
                                <span>S·ªë d∆∞ hi·ªán t·∫°i:</span>
                                <span id="confirmCardBalance" class="highlight">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Refund Calculation (for prepaid cards) -->
                    <div class="refund-box hidden" id="refundBox">
                        <div class="refund-header">
                            <div class="refund-icon">üí∞</div>
                            <div class="refund-title">Chi ti·∫øt ho√†n ti·ªÅn</div>
                        </div>
                        <div class="refund-content">
                            <div class="refund-row">
                                <span>S·ªë d∆∞ th·∫ª:</span>
                                <span id="refundBalance">--</span>
                            </div>
                            <div class="refund-row">
                                <span>Ti·ªÅn c·ªçc (n·∫øu c√≥):</span>
                                <span id="refundDeposit">--</span>
                            </div>
                            <div class="refund-total">
                                <span>T·ªïng ti·ªÅn ho√†n v·ªÅ:</span>
                                <span id="refundTotal">--</span>
                            </div>
                            <div class="refund-note">
                                <strong>L∆∞u √Ω:</strong> S·ªë ti·ªÅn s·∫Ω ƒë∆∞·ª£c ho√†n v·ªÅ t√†i kho·∫£n ng√¢n h√†ng li√™n k·∫øt trong v√≤ng 1-3 ng√†y l√†m vi·ªác.
                            </div>
                        </div>
                    </div>

                    <!-- No Refund Notice (for postpaid cards) -->
                    <div class="no-refund-box hidden" id="noRefundBox">
                        <div class="no-refund-content">
                            <div class="no-refund-icon">‚ÑπÔ∏è</div>
                            <div class="no-refund-text">
                                <strong>Th·∫ª tr·∫£ sau:</strong> Kh√¥ng c√≥ s·ªë d∆∞ ƒë·ªÉ ho√†n tr·∫£. Th·∫ª s·∫Ω ƒë∆∞·ª£c reset v√† v√¥ hi·ªáu h√≥a sau khi x√°c nh·∫≠n.
                            </div>
                        </div>
                    </div>

                    <!-- Warning Box -->
                    <div class="warning-box">
                        <div class="warning-icon">‚ö†Ô∏è</div>
                        <div class="warning-content">
                            <div class="warning-title">L∆∞u √Ω quan tr·ªçng</div>
                            <div class="warning-text">
                                ‚Ä¢ Sau khi ho√†n tr·∫£, th·∫ª s·∫Ω b·ªã <strong>v√¥ hi·ªáu h√≥a</strong> v√† kh√¥ng th·ªÉ s·ª≠ d·ª•ng ƒë·ªÉ thu√™ xe n·ªØa<br>
                                ‚Ä¢ M·ªçi li√™n k·∫øt v·ªõi t√†i kho·∫£n s·∫Ω b·ªã <strong>x√≥a</strong><br>
                                ‚Ä¢ Thao t√°c n√†y <strong>kh√¥ng th·ªÉ ho√†n t√°c</strong>
                            </div>
                        </div>
                    </div>

                    <!-- Confirmation Checkbox -->
                    <div class="checkbox-container">
                        <label class="checkbox-label">
                            <input type="checkbox" id="confirmCheckbox">
                            <span>T√¥i ƒë√£ ƒë·ªçc v√† x√°c nh·∫≠n ho√†n tr·∫£ th·∫ª. T√¥i hi·ªÉu r·∫±ng th·∫ª s·∫Ω b·ªã v√¥ hi·ªáu h√≥a sau thao t√°c n√†y.</span>
                        </label>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" id="backStep2Btn">Quay l·∫°i</button>
                    <button type="button" class="btn btn-primary btn-danger" id="confirmReturnBtn" disabled>X√°c nh·∫≠n ho√†n tr·∫£</button>
                </div>
            </div>

            <!-- Step 3: Complete -->
            <div class="step-content hidden" id="step3Content">
                <div class="complete-container">
                    <div class="success-animation">
                        <div class="success-icon-big">‚úÖ</div>
                        <div class="success-title">Ho√†n tr·∫£ th·∫ª th√†nh c√¥ng!</div>
                        <div class="success-subtitle">Th·∫ª ƒë√£ ƒë∆∞·ª£c v√¥ hi·ªáu h√≥a</div>
                    </div>

                    <!-- Receipt -->
                    <div class="receipt">
                        <div class="receipt-header">
                            <div class="receipt-title">BI√äN LAI HO√ÄN TR·∫¢ TH·∫∫</div>
                            <div class="receipt-time" id="receiptTime">--</div>
                        </div>

                        <div class="receipt-body">
                            <div class="receipt-row">
                                <span>M√£ giao d·ªãch:</span>
                                <span id="receiptTransactionId">--</span>
                            </div>
                            <div class="receipt-row">
                                <span>S·ªë th·∫ª:</span>
                                <span id="receiptCardNumber">--</span>
                            </div>
                            <div class="receipt-row">
                                <span>Lo·∫°i th·∫ª:</span>
                                <span id="receiptCardType">--</span>
                            </div>
                            <div class="receipt-row refund-row" id="receiptRefundRow" style="display: none;">
                                <span>S·ªë ti·ªÅn ho√†n tr·∫£:</span>
                                <span id="receiptRefundAmount">--</span>
                            </div>
                            <div class="receipt-status">
                                <span>Tr·∫°ng th√°i th·∫ª:</span>
                                <span class="status-badge disabled">ƒê√£ v√¥ hi·ªáu h√≥a</span>
                            </div>
                        </div>

                        <div class="receipt-footer">
                            <p><strong>L∆∞u √Ω:</strong></p>
                            <ul>
                                <li>Th·∫ª n√†y kh√¥ng c√≤n c√≥ th·ªÉ s·ª≠ d·ª•ng ƒë·ªÉ thu√™ xe</li>
                                <li id="refundNoteText">Ti·ªÅn ho√†n tr·∫£ s·∫Ω v·ªÅ t√†i kho·∫£n trong 1-3 ng√†y l√†m vi·ªác</li>
                                <li>Vui l√≤ng gi·ªØ bi√™n lai ƒë·ªÉ ƒë·ªëi chi·∫øu</li>
                            </ul>
                        </div>
                    </div>

                    <div class="info-notice">
                        <div class="info-notice-icon">‚ÑπÔ∏è</div>
                        <div class="info-notice-text">
                            N·∫øu c·∫ßn h·ªó tr·ª£ ho·∫∑c c√≥ th·∫Øc m·∫Øc, vui l√≤ng li√™n h·ªá:<br>
                            <strong>Hotline: 1900 1234</strong> (24/7)
                        </div>
                    </div>

                    <button type="button" class="btn btn-primary btn-full" id="finishBtn">Ho√†n t·∫•t</button>
                </div>
            </div>

            <!-- Loading Overlay -->
            <div class="loading-overlay hidden" id="loadingOverlay">
                <div class="spinner"></div>
                <p id="loadingText">ƒêang x·ª≠ l√Ω...</p>
            </div>
        </div>

        <!-- Right Section -->
        <div class="right-section">
            <div class="summary-card">
                <div class="summary-title">Quy tr√¨nh ho√†n tr·∫£</div>
                <div class="process-steps">
                    <div class="process-step">
                        <div class="process-number">1</div>
                        <div class="process-text">ƒê∆∞a th·∫ª v√†o khe ƒë·ªçc</div>
                    </div>
                    <div class="process-step">
                        <div class="process-number">2</div>
                        <div class="process-text">Ki·ªÉm tra th√¥ng tin</div>
                    </div>
                    <div class="process-step">
                        <div class="process-number">3</div>
                        <div class="process-text">X√°c nh·∫≠n ho√†n tr·∫£</div>
                    </div>
                    <div class="process-step">
                        <div class="process-number">4</div>
                        <div class="process-text">Nh·∫≠n bi√™n lai</div>
                    </div>
                </div>
            </div>

            <div class="info-box">
                <div class="info-box-title">üìã ƒêi·ªÅu ki·ªán ho√†n tr·∫£</div>
                <div class="info-box-text">
                    ‚Ä¢ <strong>Kh√¥ng c√≤n xe ƒëang thu√™:</strong> Ph·∫£i tr·∫£ xe tr∆∞·ªõc khi ho√†n th·∫ª<br>
                    ‚Ä¢ <strong>Th·∫ª tr·∫£ tr∆∞·ªõc:</strong> S·ªë d∆∞ ph·∫£i ‚â• 0ƒë<br>
                    ‚Ä¢ <strong>Th·∫ª tr·∫£ sau:</strong> Kh√¥ng c√≥ ph√≠ ch∆∞a thanh to√°n<br>
                    ‚Ä¢ <strong>Kh√¥ng c√≥ tranh ch·∫•p:</strong> Kh√¥ng c√≥ khi·∫øu n·∫°i ƒëang x·ª≠ l√Ω
                </div>
            </div>

            <div class="info-box refund-info">
                <div class="info-box-title">üí∞ Ch√≠nh s√°ch ho√†n ti·ªÅn</div>
                <div class="info-box-text">
                    <strong>Th·∫ª tr·∫£ tr∆∞·ªõc:</strong><br>
                    ‚Ä¢ Ho√†n l·∫°i to√†n b·ªô s·ªë d∆∞ c√≤n l·∫°i<br>
                    ‚Ä¢ Ho√†n l·∫°i ti·ªÅn c·ªçc (n·∫øu c√≥)<br>
                    ‚Ä¢ Th·ªùi gian: 1-3 ng√†y l√†m vi·ªác<br><br>
                    <strong>Th·∫ª tr·∫£ sau:</strong><br>
                    ‚Ä¢ Kh√¥ng c√≥ ho√†n ti·ªÅn<br>
                    ‚Ä¢ Ch·ªâ v√¥ hi·ªáu h√≥a th·∫ª
                </div>
            </div>

            <div class="info-box warning-info">
                <div class="info-box-title">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</div>
                <div class="info-box-text">
                    ‚Ä¢ Th·∫ª s·∫Ω b·ªã <strong>v√¥ hi·ªáu h√≥a</strong> ngay sau khi ho√†n tr·∫£<br>
                    ‚Ä¢ Kh√¥ng th·ªÉ ho√†n t√°c sau khi x√°c nh·∫≠n<br>
                    ‚Ä¢ Ph·∫£i l√†m th·∫ª m·ªõi n·∫øu mu·ªën s·ª≠ d·ª•ng l·∫°i d·ªãch v·ª•<br>
                    ‚Ä¢ Ph√≠ l√†m th·∫ª m·ªõi: <strong>50.000ƒë</strong>
                </div>
            </div>

            <div class="info-box support-info">
                <div class="info-box-title">üÜò H·ªó tr·ª£</div>
                <div class="info-box-text">
                    <strong>Hotline:</strong> 1900 1234<br>
                    <strong>Email:</strong> support@bikeshare.vn<br>
                    <strong>Gi·ªù l√†m vi·ªác:</strong> 24/7<br>
                    <strong>Website:</strong> www.bikeshare.vn
                </div>
            </div>
        </div>
    </div>

    <!-- Audio for alerts -->
    <audio id="errorSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTcIF2m98OScTgwOUKzn8LhlHQU2jdTxz3ozBSh+zPLaizsKFF+45OumVBMJR6Hh8bxsIAQohM/y24k4CBdqvfDknE4MDlCs5/C4ZR0FNo3U8c96MwUofszy2os7ChRfuOTrplQTCUeh4fG8bCAEKITP8tyIOQcXar3w5JxODA5QrOfwuGUdBTaN1PHPejMFKH7M8tqLOwoUX7jk66ZUEwlHoeHxvGwgBCiEz/LciDkHF2q98OScTgwOUKzn8LhlHQU2jdTxz3ozBSh+zPLaizsKFF+45OumVBMJR6Hh8bxsIAQohM/y3Ig5BxdqvfDknE4MDlCs5/C4ZR0FNo3U8c96MwUofszy2os7ChRfuOTrplQTCUeh4fG8bCAEKITP8tyIOQcXar3w5JxODA5QrOfwuGUdBTaN1PHPejMFKH7M8tqLOwoUX7jk66ZUEwlHoeHxvGwgBCiEz/LciDkHF2q98OScTgwOUKzn8Lg=" type="audio/wav">
    </audio>

    <script src="js/hoantrathe.js"></script>
</body>
</html>
